<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ title or "TurboChef" }}</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body class="bg-gray-50 text-gray-900 relative overflow-x-hidden">
  <div class="bg-blob"></div>
  <div class="animated-bg"></div>
  <header class="max-w-3xl mx-auto p-6">
    <div class="flex items-center gap-4">
      <img src="/assets/chef-hat.svg" alt="Chef Hat" class="w-12 h-12 drop-shadow-lg">
      <h1 class="text-5xl font-serif font-bold tracking-tight text-accent drop-shadow">TurboChef</h1>
    </div>
    <nav class="mt-6 flex gap-4 nav-bar">
      {% if lang == 'fr' %}
        {% set langPrefix = '/fr' %}
      {% else %}
        {% set langPrefix = '' %}
      {% endif %}
      <a class="nav-link" href="{{ langPrefix }}/">{% if lang == 'fr' %}Accueil{% else %}Home{% endif %}</a>
      <a class="nav-link" href="{{ langPrefix }}/recipes/cooking/">{% if lang == 'fr' %}Cuisine{% else %}Cooking{% endif %}</a>
      <a class="nav-link" href="{{ langPrefix }}/recipes/baking/">{% if lang == 'fr' %}Boulangerie{% else %}Baking{% endif %}</a>
      <a class="nav-link" href="{{ langPrefix }}/recipes/sauces/">{% if lang == 'fr' %}Sauces{% else %}Sauces{% endif %}</a>
    </nav>
    <div class="lang-switcher">
      <label for="lang-select" class="sr-only">Language</label>
      <select id="lang-select" class="lang-select">
        <option value="en">English</option>
        <option value="fr">Français</option>
      </select>
    </div>
    <script>
      // Language switcher logic
      (function() {
        const select = document.getElementById('lang-select');
        const path = window.location.pathname;
        // Detect current language
        const isFrench = path.startsWith('/fr/');
        select.value = isFrench ? 'fr' : 'en';
        select.addEventListener('change', function() {
          let newPath;
          if (this.value === 'fr') {
            if (!isFrench) {
              newPath = '/fr' + path;
            } else {
              newPath = path;
            }
          } else {
            if (isFrench) {
              newPath = path.replace(/^\/fr/, '');
              if (newPath === '') newPath = '/';
            } else {
              newPath = path;
            }
          }
          window.location.pathname = newPath;
        });
      })();
    </script>
  </header>
  <main class="max-w-3xl mx-auto p-6">
    {{ content | safe }}
  </main>
  <script src="/assets/search.js"></script>
  <footer class="max-w-3xl mx-auto p-6 text-sm text-gray-600 border-t mt-12">
    <span class="font-bold text-accent">© {{ site.year }} TurboChef</span>
    <span class="ml-2">A modern personal cookbook.</span>
  </footer>
</body>
</html>
